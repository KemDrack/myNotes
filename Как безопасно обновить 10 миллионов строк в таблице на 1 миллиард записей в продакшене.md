#### üîπ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:**
- **–î–æ–ª–≥–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** ‚Äì –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `UPDATE` –Ω–∞ 10M —Å—Ç—Ä–æ–∫ —Å—Ä–∞–∑—É, –≤–æ–∑–º–æ–∂–µ–Ω **–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –¥–æ–ª–≥–∏–π `lock`**, —á—Ç–æ –∑–∞—Ç–æ—Ä–º–æ–∑–∏—Ç —Ä–∞–±–æ—Ç—É –ë–î.
- **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫/CPU** ‚Äì –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–∂–µ—Ç **–ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é** –∏–ª–∏ –≤—ã–∑–≤–∞—Ç—å **—É–≤–µ–ª–∏—á–µ–Ω–∏–µ WAL (Write-Ahead Logging)**.
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** ‚Äì –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è, –≤–æ–∑–º–æ–∂–Ω—ã **–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (WAL)** –∏ **—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–∞—Ç–∞ (rollback)**.
- **–°–±–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏** ‚Äì –∫—Ä—É–ø–Ω—ã–µ `UPDATE`-–∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç **–∑–∞–º–µ–¥–ª–∏—Ç—å –∏–ª–∏ —Å–ª–æ–º–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∏**.


### **–†–∞–∑–±–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –±–∞—Ç—á–∏**
–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ `UPDATE` –Ω–∞ 10M —Å—Ç—Ä–æ–∫, **—Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ 10,000 –∏–ª–∏ 100,000 –∑–∞–ø–∏—Å–µ–π).
```sql
UPDATE my_table 
SET column_to_fix = new_value 
WHERE condition
LIMIT 10000;
```
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è **–∂–¥—ë–º 1-2 —Å–µ–∫—É–Ω–¥—ã**, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É:
```sql
DO $$ BEGIN 
    FOR i IN 1..1000 LOOP
        UPDATE users 
        SET status = 'active' 
        WHERE last_login < '2023-01-01'
        LIMIT 10000;  -- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ 10K –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑
        
        PERFORM pg_sleep(0.5);  -- –ü–∞—É–∑–∞ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
    END LOOP;
END $$;
```
### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ORDER BY` + `LIMIT`**
–ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, **—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤** –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Ç–æ—Ä–º–æ–∑–∞–º.  
–õ—É—á—à–µ –æ–±–Ω–æ–≤–ª—è—Ç—å **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ `id`):
```sql
UPDATE my_table 
SET column_to_fix = new_value 
WHERE condition
ORDER BY id
LIMIT 10000;
```


**–í—ã–∫–ª—é—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)**
```sql
ALTER INDEX my_index_name UNUSABLE;
ALTER INDEX my_index_name REBUILD;
```