<span style="background:#fff88f">Горутина</span> - легковесный поток, который создается и управляется планировщиком горутин([[Планировщик]]).

Минимальный вес горутины - 2кб(стек), поэтому она более эффективна в использовании ресурсами, по сравнению с обычными системными потоками. Горутины общаются между собой через [[Каналы]] ([[каналыV2]])

Параметр `runtime.GOMAXPROCS` определяет количество потоков ОС, которое будет выполнять горутины одновременно

[[Race Condition]]
[[Data Race(Гонка данных)]]

**Проверка максимального количества горутин**
```go
func main() {
	count := 0
	for {
		go func() {
			select {} // Горутина ничего не делает, только висит
		}()
		count++
		if count%10000 == 0 {
			fmt.Printf("Создано горутин: %d\n", count)
		}
	}
}
```

- В коде сначала выполняется операция отправки (`ch <- true`), которая блокирует основную горутину. 
- Горутина, которая должна читать данные из канала (`go func() { <-ch }`), запускается **после** блокировки основной горутины. Таким образом, чтение из канала никогда не происходит, и программа зависает.
```go
func main() {
  ch := make(chan bool)
  ch <- true
  go func() {
    <-ch
  }()
  ch <-true
}
```

https://www.notion.so/Concurrency-2-17fd686457048020974ee09a361bafc9




> [!NOTE]
> Горутины лёгкие, и их переключение обходится дешевле, чем переключение потоков ОС
> Планировщик может одновременно управлять миллионами горутин
