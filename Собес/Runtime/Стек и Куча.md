### Стек

**Стек** — это область памяти, в которой хранятся временные данные, такие как **локальные переменные функций** и **параметры**.(принцип LIFO: Last In, First Out).

- В стек попадают данные, которые Go компилятор может проанализировать как долго они будут жить в программе и как много места они будут занимать **локальные переменные функций**, **аргументы** и **возвращаемые значения**

Когда вызывается функция, для её работы создаётся кадр стека (**stack frame**), в котором хранятся все локальные переменные. Когда функция завершает выполнение, её кадр стека просто убирается, освобождая память
### Куча

**Куча** — это область памяти, предназначенная для **долгоживущих данных**, которые должны сохраняться между вызовами функций или имеют неопределённый жизненный цикл. Если объект создаётся и используется в **нескольких функциях**, или объект - **указатель**

*Иногда Go компилятор не может спрогнозировать сколько данные будут жить в программе и сколько места они будут занимать*
- Кучей нужно управлять в отличии от стека
- Огромная область памяти, которая шарится между всеми потоками и она используется для хранения динамической памяти (Если эта память будет постоянно расти, тогда в какой то момент она может съесть всю доступную память)
- Именно для кучи нужен [[Garbage Collector]]

Выделение памяти в куче требует больше времени, чем в стеке, поскольку память должна быть управляемой и освобождаться вручную или с помощью сборщика мусора

```go
func createUser(name string) *string {
    user := name // переменная user создаётся в куче, так как возвращается из функции в качестве указателя. Т.е переменная должна существовать вне функции
    return &user
}

func main() {
    userPtr := createUser("Alice")
    fmt.Println(*userPtr) // память для userPtr хранится в куче
}
```

В этом примере строка user хранится в куче, так как она возвращается из функции в качестве указателя и её жизненный цикл продолжается в main(). Сборщик мусора в Go позже очистит эту память, когда она больше не будет использоваться.

### *Разница между стеком и кучей*

Стек: выделение памяти быстрое, используется для временных данных. Стек автоматически очищается после завершения функции. Но стек ограничен по размеру, и хранит только локальные данные и параметры функций.

Куча: выделение памяти медленнее, но данные в куче могут жить дольше, чем вызывающая их функция. Куча используется для объектов, которые должны существовать между вызовами функций или долго сохраняться.

### Как Go управляет стеком и кучей?

В Go компилятор решает, где будет выделена память — в стеке или в куче. Обычно переменные выделяются в стеке, если это возможно, поскольку это быстрее. Однако, если переменная должна жить дольше текущей функции или передаётся по ссылке, она выделяется в куче.

**Сборщик мусора (Garbage Collector)** отвечает за очистку памяти в куче. Он автоматически находит объекты, которые больше не используются, и освобождает их.