

```go
// Сервис заказов
func createOrder() error {
    fmt.Println("Order created")
    return nil
}

func cancelOrder() error {
    fmt.Println("Order canceled")
    return nil
}

// Сервис инвентаризации
func reserveInventory() error {
    fmt.Println("Inventory reserved")
    return errors.New("out of stock") // Симуляция ошибки
}

func releaseInventory() error {
    fmt.Println("Inventory released")
    return nil
}

// Сервис платежей
func processPayment() error {
    fmt.Println("Payment processed")
    return nil
}

func refundPayment() error {
    fmt.Println("Payment refunded")
    return nil
}

// Оркестратор SAGA
func sagaOrchestrator() error {
    // Шаг 1: Создать заказ
    if err := createOrder(); err != nil {
        return err
    }

    // Шаг 2: Зарезервировать товар
    if err := reserveInventory(); err != nil {
        cancelOrder() // Компенсирующая транзакция
        return err
    }

    // Шаг 3: Обработать платеж
    if err := processPayment(); err != nil {
        releaseInventory() // Компенсирующая транзакция
        cancelOrder()      // Компенсирующая транзакция
        return err
    }

    return nil
}

func main() {
    if err := sagaOrchestrator(); err != nil {
        fmt.Println("SAGA failed:", err)
    } else {
        fmt.Println("SAGA completed successfully")
    }
}
```