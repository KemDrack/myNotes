

### Чем горутна отличается от потока

[[Горутины]] и потоки служат для выполнения кода параллельно

1. Лёгковесность

    [[Горутины]]:
    - Используют **2-4 КБ** памяти на стек при создании.
    - Их стеки **динамически растут** по мере необходимости, начиная с маленького размера.
    - Это позволяет запускать тысячи, а иногда миллионы горутин, без значительного потребления памяти.
	**Потоки:**
    - Используют **1–2 МБ** памяти на стек, выделяемый при создании.
    - Размер стека статичен (если не указано иное), что приводит к переполнению памяти при создании большого количества потоков.
    - Увеличение количества потоков напрямую влияет на потребление ресурсов ОС

2. Управление и планирование
   - Управляются **планировщиком Go**.([[планировщикГорутин]])
 Планировщик Go **экономичен** в переключении между горутинами (меньше затрат на контекстные переключения)
- **Потоки:**
    - Управляются **ядром ОС**.
    - Используют модель **1:1**, где каждый поток соответствует системному потоку.
    - Контекстное переключение между потоками требует обращения к ОС и дороже, чем переключение горутин

### Виды Context
[[Context]]
**Background**: Обычно используется в главной функции, инициализации приложения и тестах, как базовый контекст  
  
**TODO**: Используется, когда не ясно, какой контекст использовать или когда контекст будет определён позже 

**WithCancel**: Создаёт контекст, который может быть отменён вручную  
  
**WithDeadline**: Создаёт контекст с временной границей, после которой он отменяется  
  
**WithTimeout**: Похож на WithDeadline, но позволяет указать таймаут вместо конкретного времени

**WithValue**(parent, key, value)
Этот контекст позволяет передавать данные между частями программы. Он используется для хранения информации, необходимой на протяжении выполнения всей операции, например, идентификатор запроса.
### Что нельзя передавать в контекст?
В контекст не следует передавать данные большого размера или чувствительные данные. Контексты предназначены для передачи сигналов (например, отмены) и небольших метаданных. Использование контекста для передачи значительных данных может привести к усложнению кода и даже проблемам с производительностью
### Отличие между context.Background() и context.TODO()

context.**Background**() используется как основной контекст, который служит начальной точкой для всех других контекстов. context.**TODO**() используется в тех местах, где пока не ясно, какой контекст должен быть использован. Это сигнал разработчику о необходимости уточнить контекст позже

### Что лучше не передавать в контекст со значением?

В контекст лучше не передавать значительные или изменяющиеся данные. Контекст предназначен для хранения небольших статических данных, таких как идентификаторы запросов, токены и т.д. Если в контексте хранить большие данные, это усложняет управление и снижает читаемость.

### Для чего используется Context?

Для передачи данных и управления сроками жизни между процессами, горутинами или запросами. Для сигналов об отмене операций


