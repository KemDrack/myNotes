

### Что такое Kafka и зачем она нужна?

Кафка это брокер сообщений, который используется для сборки, хранения и передачи сообщений между разными системами

### Что такое брокер сообщений в Кафке?

**Брокер сообщений** — это сервер в кластере Kafka, который получает, хранит и распределяет сообщения между продюсерами (отправителями) и консюмерами (получателями). В Kafka обычно работает несколько брокеров для обеспечения надёжности и масштабируемости.

### Что такое топик в Kafka?

**Топик** — это категория, через которую продюсеры отправляют, а консюмеры получают сообщения. Топик разделяется на партиции для распределения данных по нескольким брокерам, что позволяет масштабировать и ускорять обработку сообщений.

### Что такое партиции в Kafka?

**Партиция** — это подраздел топика в Kafka, которая позволяет распределять данные по нескольким серверам. Каждая партиция хранит часть сообщений топика и упорядочена. Партиции обеспечивают параллелизм и повышают производительность Kafka

### Что такое шина данных (data bus) в контексте Kafka?

**Шина данных** — это архитектурная концепция, где Kafka играет роль основного механизма для передачи сообщений между различными компонентами системы. Kafka выступает в роли "шины", которая связывает различные приложения, сервисы и системы, позволяя им обмениваться данными в реальном времени.

1. **Сервис пользователей**:
    
    - Отправляет события о действиях пользователей (например, регистрация, вход) в топик `user_events`.
        
2. **Сервис аналитики**:
    
    - Читает события из топика `user_events` для анализа поведения пользователей.
        
3. **Сервис уведомлений**:
    
    - Читает события из топика `user_events` для отправки приветственных писем новым пользователям.
        
4. **Сервис логов**:
    
    - Читает события из топика `user_events` для записи в лог-файлы
### Какие гарантии доставки предоставляет Kafka?

Kafka предоставляет три уровня гарантии доставки сообщений:

1. **At most once** — сообщение доставляется не более одного раза, но может быть потеряно. Самый быстрый, но ненадежный
2. **At least once** — сообщение гарантированно доставляется хотя бы один раз, но может быть доставлено повторно. Средний по скорости. Надежный, но возможны дубликаты  
3. **Exactly once** — сообщение доставляется ровно один раз, обеспечивая строгое выполнение без потерь или дубликатов (при определённых настройках и с поддержкой транзакций). Медленный, самый надёжный, без дубликатов

### Как работает продюсер в Kafka?

**Продюсер** — компонент, который отправляет сообщения в топик. Продюсер выбирает партицию для сообщения и отправляет его в соответствующий брокер, который хранит сообщение в соответствующей партиции.


### Как работает консюмер в Kafka?

**Консюмер** — это компонент, который читает сообщения из топиков. Консюмеры могут объединяться в группы, каждая группа получает уникальный набор партиций, чтобы гарантировать, что каждое сообщение обрабатывается только одним консюмером из группы.

### В чем разница между кафкой и RabbitMQ?

- **Архитектура**: Kafka ориентирована на обработку потоков данных с высокой производительностью и хранением сообщений, RabbitMQ — на традиционные очереди сообщений.  
- **Модель доставки**: Kafka использует модель **publish-subscribe**, RabbitMQ — модель **queue-based**.  
- **Производительность**: Kafka лучше для больших объёмов данных и высокой пропускной способности, RabbitMQ — для сложных маршрутизаций и меньших нагрузок.  
- **Хранение**: Kafka хранит сообщения на диске (лог хранения), RabbitMQ — по умолчанию в оперативной памяти.